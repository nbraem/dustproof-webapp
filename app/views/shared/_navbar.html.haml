.navbar.navbar-inverse.navbar-static-top
  .container
    %button.navbar-toggle(type="button" data-toggle="collapse" data-target=".navbar-responsive-collapse")
      %span.icon-bar
      %span.icon-bar
      %span.icon-bar
    = link_to t("app_name"), root_path, class: "navbar-brand"

    .navbar-collapse.collapse.navbar-responsive-collapse
      %ul.nav.navbar-nav
        %li{ class: action_name == "home" ? "active" : nil }= link_to icon_text("home"), root_url
        %li.dropdown
          = link_to "#", class: "dropdown-toggle", "aria-expanded" => false, data: { toggle: "dropdown" }, role: "button" do
            = icon_text("info-circle", "DustProof")
            %span.caret
          %ul.dropdown-menu{ role: "menu" }
            %li{ class: action_name == "how" ? "active" : nil }= link_to icon_text("gears", "Hoe?"), "/hoe"
            %li{ class: action_name == "guidelines" ? "active" : nil }= link_to icon_text("book", "Richtlijnen"), "/richtlijnen"
            %li{ class: action_name == "about" ? "active" : nil }= link_to icon_text("users", "Team"), "/over-ons"

        - if user_signed_in?
          %li= link_to icon_text("dashboard", "Meters"), devices_path
          %li.dropdown
            = link_to "#", class: "dropdown-toggle", "aria-expanded" => false, data: { toggle: "dropdown" }, role: "button" do
              = icon_text("line-chart", "Mijn metingen")
              %span.caret
            %ul.dropdown-menu{ role: "menu" }
              %li= link_to "Detailgrafiek", chart_measurements_path
              %li= link_to "Overzicht per uur", average_hourly_measurements_path
              %li= link_to "Overzicht per dag", average_daily_measurements_path
              %li.divider
              %li= link_to "Alle metingen", measurements_path
        - else
          %li{ class: action_name == "measurements" ? "active" : nil }= link_to icon_text("line-chart", "Metingen"), "/metingen"
        - if user_signed_in? && current_user.admin?
          %li.dropdown
            = link_to "#", class: "dropdown-toggle", "aria-expanded" => false, data: { toggle: "dropdown" }, role: "button" do
              = icon_text("gear", "Admin")
              %span.caret
            %ul.dropdown-menu{ role: "menu" }
              %li= link_to icon_text("envelope", "Incoming messages"), incoming_messages_path
              %li= link_to icon_text("line-chart", "LoRa metrics"), lora_metrics_path
              %li= link_to icon_text("line-chart", "WiFi metrics"), wifi_metrics_path
              %li= link_to icon_text("users", "Gebruikers"), users_path

      %ul.nav.navbar-nav.navbar-right
        %li{ class: controller_name == "contacts" ? "active" : nil }= link_to icon_text("bullhorn", "Contact"), "/contact"

        - if user_signed_in?
          %li.dropdown
            = link_to "#", class: "dropdown-toggle", "aria-expanded" => false, data: { toggle: "dropdown" }, role: "button" do
              = current_user.full_name
              %span.caret
            %ul.dropdown-menu{ role: "menu" }
              %li= link_to icon_text("gear", t("devise.account_settings")), edit_user_registration_path
              %li= link_to icon_text("sign-out", t("devise.sign_out")), destroy_user_session_path, method: :delete

        - else
          %li= link_to icon_text("sign-in", "Inloggen"), new_user_session_path
